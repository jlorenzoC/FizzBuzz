<section
  class="
    fzbz-scroll-search-top-bar
    flex-grow-1 flex-shrink-1 flex flex-wrap
    h-auto
  "
>
  <p-sidebar
    position="top"
    [(visible)]="displayTopBar"
    [modal]="false"
    class="flex-grow-1 flex flex-wrap h-auto z-5"
  >
    <app-dashboard-inside-sidebar
      [numbersGenerationFinished]="
        numbersToProcessByFzBzPipe.length
          | areAllTheNumbersProcessed
            : staticResource.AMOUNT_OF_NUMBERS_TO_PASS_IN_FIZZBUZZ_ALGORITHM
      "
      [(filterValue)]="filterValue"
      [numbersToProcessByFzBzPipe]="numbersToProcessByFzBzPipe"
      [checkStore]="checkStore"
      (emitValue)="onInput($event)"
      (checkStoreEmitter)="filter($event)"
    ></app-dashboard-inside-sidebar>
  </p-sidebar>
</section>

<section class="fzbz-filter flex justify-content-center mb-3 md:mb-0">
  <p-card
    [@hideFilterCard]="displayTopBar ? 'hide' : 'show'"
    id="fizzbuzz-filter-card"
    class="md:mt-4 md:mb-3 md:w-8 lg:w-7 w-full z-5"
    styleClass="shadow-8"
  >
    <app-input-search-by-number
      [filteredElements]="numbersToProcessByFzBzPipe | slice: 0"
      [showContent]="
        numbersToProcessByFzBzPipe.length
          | areAllTheNumbersProcessed
            : staticResource.AMOUNT_OF_NUMBERS_TO_PASS_IN_FIZZBUZZ_ALGORITHM
      "
      class="w-full"
      id="fzbz-input-filter"
      (value)="onInput($event)"
      [(filterValue)]="filterValue"
      (clickTagFilter)="filter($event)"
      [checkStore]="checkStore"
    >
    </app-input-search-by-number>
    <app-view-switcher
      [isGroupedCardViewActivated]="isGroupedCardViewActivated"
      [isIndividualCardViewActivated]="isIndividualCardViewActivated"
      (view)="toggleView($event)"
    ></app-view-switcher>
  </p-card>
</section>

<section
  class="
    flex
    justify-content-center
    align-content-center align-items-stretch
    flex-wrap flex-row
  "
  *ngIf="isGroupedCardViewActivated"
>
  <ng-container *ngIf="groupedCards">
    <app-grouped-info
      [group]="group"
      style="width: 320px"
      class="p-2 flex flex-shrink-0"
      *ngFor="let group of groupedCards"
      [filterCriteria]="filterValue"
    ></app-grouped-info>
  </ng-container>
</section>

<section
  *ngIf="isIndividualCardViewActivated"
  class="fzbz-cards flex justify-content-center flex-wrap"
>
  <ng-container
    *ngIf="
      numbersToProcessByFzBzPipe.length
        | areAllTheNumbersProcessed
          : staticResource.AMOUNT_OF_NUMBERS_TO_PASS_IN_FIZZBUZZ_ALGORITHM;
      else skeletonCards
    "
  >
    <p-card
      [attr.data-key]="numberToProcessByFzBzPipe"
      class="fizzbuzz-card"
      *ngFor="let numberToProcessByFzBzPipe of cardsFiltered"
      styleClass="h-8rem m-3 shadow-8 text-900"
      [style]="{
        width: '300px',
        position: 'relative',
        opacity: (numberToProcessByFzBzPipe | fizzbuzz) === '' ? '0.9' : '1',
        backgroundColor:
          (numberToProcessByFzBzPipe | fizzbuzz) === '' ? '#dddddd' : 'none'
      }"
    >
      <ng-template pTemplate="header">
        <span class="p-card-title absolute card-title2">
          {{ numberToProcessByFzBzPipe }}
        </span>
      </ng-template>
      <app-image-badge
        [fizzbuzzType]="{
          type: numberToProcessByFzBzPipe | fizzbuzz: false | toString,
          number: numberToProcessByFzBzPipe
        }"
      ></app-image-badge>
    </p-card>
  </ng-container>
  <ng-template #skeletonCards>
    <app-skeleton-fzbz-cards
      class="fadein"
      *ngFor="let numberToProcessByFzBzPipe of mockCards"
    ></app-skeleton-fzbz-cards>
  </ng-template>
</section>

<p-scrollTop class="z-2"></p-scrollTop>

<p-speedDial
  [model]="items"
  showIcon="pi pi-bars"
  hideIcon="pi pi-times"
  buttonClassName="p-button-outlined"
  [style]="{ position: 'fixed', bottom: '20px', left: '5px' }"
  buttonClassName="p-button-primary"
  class="sm:hidden"
></p-speedDial>

<div class="flex justify-content-center">
  <p-messages class="fixed mx-1 sm:mx-0 bottom-0 z-5"></p-messages>
</div>
